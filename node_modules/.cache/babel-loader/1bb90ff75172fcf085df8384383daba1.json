{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\visualizacion_microservicios - copia\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\visualizacion_microservicios - copia\\\\src\\\\App.js\";\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\n//************* Imports *****************/\nimport React from 'react';\nimport * as go from 'gojs';\nimport '../node_modules/gojs/extensions/Figures';\nimport { Inspector } from '../node_modules/gojs/extensionsJSM/DataInspector.js';\nimport './css/App.css'; // contains .diagram-component CSS\n\nimport swal from 'sweetalert'; //************ Variables ****************/\n\nvar myDiagram;\nvar nodos = [];\nvar aristas = [];\nvar diagramaCargado = false;\nvar json;\nvar userStory = [];\nvar proximoMS = \"\";\nvar CantidadMSs = 0;\nvar AIST = 0; // Acoplamiento AIS total\n\nvar ADST = 0; // Acoplamiento ADS total\n\nvar SIYT = 0; // Acoplamiento SIY total\n\nvar CpT = 0; // Acoplamiento total de la aplicaci√≥n\n\nvar Coh = 0; // Cohesion grade total\n\nvar CohT = 0; // Cohesi√≥n total de la aplicaci√≥n\n\nvar WsicT = 0; // mayor n√∫mero de historias de usuario asociadas a un microservicio\n//var CxT = 0;  // Complejidad cognitiva total de la aplicaci√≥n\n\nvar SsT = 0; // Similitud sem√°ntica total de la aplicaci√≥n\n\n/*\nùëÄùëÜùêµùê¥=(ùëÄùëÜ, ùëÄùëá¬†‚Éó) \nDonde:\nùëÄùëÜùêµùê¥ = MicroServices Based Application\nMS es un conjunto de microservicios MS = {ms1, ms2, ‚Ä¶, msn} \nùëÄùëá¬†‚Éó es un vector de m√©tricas calculadas para MSBA\n\nùëÄùëá¬†‚Éó=[ùê∂ùëùùëá, ùê∂ùëú‚Ñéùëá, ùëäùë†ùëñùëêùëá, ùê∂ùë•ùëá,(100‚àí ùëÜùë†ùëá)]\nDonde:\nCpT es el acoplamiento, \nCohT es la cohesi√≥n, \nWsicT es el mayor n√∫mero de historias de usuario asociadas a un microservicio, \nCxT son los puntos de complejidad cognitiva, y \nSsT es la similitud sem√°ntica; Las cuales son m√©tricas calculadas para MSBA\n*/\n\n/* Cx = (sum(cùëî)) + maxMSpoints + (CantidadMSs*WsicT) + (sum(Pf)) + (sum(SIY)) */\n\nvar maxMSpoints = 0; //var Pf = 0; // N√∫mero (m√°ximo?) de llamadas secuenciales entre microservicios\n\n/* CxT = Cx / Cxo */\n//************ Funciones ****************/\n\nfunction similitud_semantica(_x) {\n  return _similitud_semantica.apply(this, arguments);\n}\n\nfunction _similitud_semantica() {\n  _similitud_semantica = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(nombres_HU) {\n    var resultado, cadena, similitudSemantica, i, encodedValue;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            resultado = \"\";\n            cadena = \"\";\n            similitudSemantica = 0;\n\n            if (!(nombres_HU.length > 1)) {\n              _context.next = 11;\n              break;\n            }\n\n            cadena = nombres_HU[0];\n\n            for (i = 1; i < nombres_HU.length; i++) {\n              cadena = cadena + \"/\" + nombres_HU[i];\n            }\n\n            encodedValue = encodeURIComponent(cadena);\n            _context.next = 9;\n            return new Promise(function (resolve, reject) {\n              fetch(\"http://localhost:8000/api/?user_stories=\".concat(encodedValue), {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              }).then(function (response) {\n                setTimeout(function () {\n                  resolve(response);\n                }, 50);\n                return response.json();\n              }).then(function (json) {\n                resultado = json;\n                similitudSemantica = parseFloat(resultado.semantic_similarity);\n              }).catch(function (err) {\n                swal({\n                  title: \"\" + err,\n                  text: \"Error\",\n                  icon: \"error\",\n                  timer: 5000\n                });\n                diagramaCargado = false;\n              });\n            });\n\n          case 9:\n            _context.next = 12;\n            break;\n\n          case 11:\n            similitudSemantica = 1;\n\n          case 12:\n            return _context.abrupt(\"return\", similitudSemantica);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _similitud_semantica.apply(this, arguments);\n}\n\nfunction convertir_jsonAnodos() {\n  return _convertir_jsonAnodos.apply(this, arguments);\n}\n\nfunction _convertir_jsonAnodos() {\n  _convertir_jsonAnodos = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var _loop2, i, MSdependencias, MScalls, MSpuntos, nombresHU, rendimiento, _loop3, _i, LC, MSrequests, MSimportancia, interdependencias, interdepA, interdepB, SIY;\n\n    return _regeneratorRuntime().wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            AIST = 0;\n            ADST = 0;\n            SIYT = 0;\n            CpT = 0;\n            Coh = 0;\n            CohT = 0;\n            WsicT = 0;\n            SsT = 0;\n            CantidadMSs = 0;\n            maxMSpoints = 0;\n            nodos = [];\n            aristas = [];\n            _loop2 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop2(i) {\n              var _loop4, j;\n\n              return _regeneratorRuntime().wrap(function _loop2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      MSdependencias = [];\n                      MScalls = [];\n                      MSpuntos = 0;\n                      nombresHU = [];\n\n                      _loop4 = function _loop4(j) {\n                        nombresHU = nombresHU.concat(json[i].userStories[j].name);\n                        MSpuntos = MSpuntos + json[i].userStories[j].points;\n\n                        if (Object(json[i].userStories).length > WsicT) {\n                          WsicT = Object(json[i].userStories).length;\n                        }\n\n                        ;\n                        nodos = nodos.concat({\n                          actor: json[i].userStories[j].actor,\n                          componente: \"historia\",\n                          dependencies: json[i].userStories[j].dependencies,\n                          group: json[i].id,\n                          id: json[i].userStories[j].id,\n                          key: json[i].userStories[j].id,\n                          name: json[i].userStories[j].name,\n                          priority: json[i].userStories[j].priority,\n                          project: json[i].userStories[j].project,\n                          points: json[i].userStories[j].points\n                        });\n\n                        var _loop5 = function _loop5(k) {\n                          aristas = aristas.concat({\n                            from: json[i].id,\n                            // eslint-disable-next-line\n                            to: function () {\n                              for (var l = 0; l < Object(json).length; l++) {\n                                for (var m = 0; m < Object(json[l].userStories).length; m++) {\n                                  if (json[i].userStories[j].dependencies[k] === json[l].userStories[m].id) {\n                                    if (json[i].id !== json[l].id) {\n                                      // Si son diferentes MS's se asigna el valor a 'to'.\n                                      MScalls = MScalls.concat(json[l].id);\n                                      return json[l].id;\n                                    }\n                                  }\n                                }\n                              }\n                            }()\n                          });\n                        };\n\n                        for (var k = 0; k < Object(json[i].userStories[j].dependencies).length; k++) {\n                          _loop5(k);\n                        }\n                      };\n\n                      for (j = 0; j < Object(json[i].userStories).length; j++) {\n                        _loop4(j);\n                      }\n                      /* Hacer este filter abajo si se quieren mostrar las dependencias repetidas en el Inspector*/\n                      // eslint-disable-next-line\n\n\n                      MSdependencias = MScalls.filter(function (item, index) {\n                        // Quita las dependencias repetidas\n                        return MScalls.indexOf(item) === index;\n                      });\n\n                      if (!(json[i].userStories.length !== 0)) {\n                        _context2.next = 26;\n                        break;\n                      }\n\n                      CantidadMSs++;\n                      _context2.t0 = nodos;\n                      _context2.t1 = MScalls.length;\n                      _context2.t2 = MSdependencias.length;\n                      _context2.t3 = Math.ceil(Math.sqrt(json[i].userStories.length));\n                      _context2.t4 = json[i].complexity;\n                      _context2.t5 = MSdependencias;\n                      _context2.t6 = json[i].id;\n                      _context2.t7 = json[i].id;\n                      _context2.t8 = MSpuntos;\n                      _context2.next = 20;\n                      return similitud_semantica(nombresHU);\n\n                    case 20:\n                      _context2.t9 = _context2.sent;\n\n                      _context2.t10 = function () {\n                        if (document.getElementById('stories').checked) {\n                          return 45 + json[i].userStories.length * 12;\n                        } else {\n                          return 45 + MSpuntos * 12;\n                        }\n                      }();\n\n                      _context2.t11 = 0.23 - (45 + json[i].userStories.length * 12 - 57) * 0.12 / 100;\n                      _context2.t12 = json[i].userStories.length;\n                      _context2.t13 = {\n                        calls: _context2.t1,\n                        cg: 0,\n                        coupling_AIS: 0,\n                        coupling_ADS: _context2.t2,\n                        coupling_SIY: 0,\n                        cohesion_lack: 0,\n                        cohesion_grade: 0,\n                        columnas: _context2.t3,\n                        complexity: _context2.t4,\n                        componente: \"microservicio\",\n                        dependencies: _context2.t5,\n                        isGroup: true,\n                        id: _context2.t6,\n                        key: _context2.t7,\n                        points: _context2.t8,\n                        requests: 0,\n                        semantic_similarity: _context2.t9,\n                        size: _context2.t10,\n                        textoID: _context2.t11,\n                        userStories: _context2.t12\n                      };\n                      nodos = _context2.t0.concat.call(_context2.t0, _context2.t13);\n\n                    case 26:\n                      ADST = ADST + Math.pow(MSdependencias.length, 2); // Sumatoria de los cuadrados\n\n                    case 27:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, _loop2);\n            });\n            i = 0;\n\n          case 14:\n            if (!(i < Object(json).length)) {\n              _context3.next = 19;\n              break;\n            }\n\n            return _context3.delegateYield(_loop2(i), \"t0\", 16);\n\n          case 16:\n            i++;\n            _context3.next = 14;\n            break;\n\n          case 19:\n            ; // Quitar las aristas con 'to' undefined\n\n            aristas = aristas.filter(function (item) {\n              return item.to !== undefined;\n            });\n            rendimiento = 0; // C√°lculo de los acomplamientos AIS y SIY\n\n            _loop3 = function _loop3(_i) {\n              if (nodos[_i].componente === \"microservicio\") {\n                LC = CantidadMSs - 1; // Cohesion Lack\n                // C√°lculo del acomplamiento AIS (Cantidad de aristas que le entran)\n\n                MSrequests = [];\n                MSimportancia = [];\n\n                for (var j = 0; j < aristas.length; j++) {\n                  if (nodos[_i].id === aristas[j].to) {\n                    MSrequests = MSrequests.concat(aristas[j].from);\n                  }\n                } // eslint-disable-next-line\n\n\n                MSimportancia = MSrequests.filter(function (item, index) {\n                  // Quita las importancias\n                  return MSrequests.indexOf(item) === index; // repetidas\n                });\n                nodos[_i].requests = MSrequests.length;\n                nodos[_i].coupling_AIS = MSimportancia.length;\n                AIST = AIST + Math.pow(MSimportancia.length, 2); // Sumatoria de los cuadrados\n                // C√°lculo del acomplamiento SIY (interdependencias / cantidad de MS's)\n\n                interdependencias = []; // eslint-disable-next-line\n\n                interdepA = nodos[_i].dependencies.filter(function (item, index) {\n                  // Quita las depen-\n                  return nodos[_i].dependencies.indexOf(item) === index; // dencias(1) repetidas\n                });\n\n                for (var _j = 0; _j < interdepA.length; _j++) {\n                  var _loop6 = function _loop6(k) {\n                    // Inicia de nuevo en todos los nodos\n                    if (nodos[k].componente === \"microservicio\") {\n                      // solo los nodos MS's\n                      // eslint-disable-next-line\n                      interdepB = nodos[k].dependencies.filter(function (item, index) {\n                        return nodos[k].dependencies.indexOf(item) === index;\n                      }); // Quita las dependencias(2) repetidas\n\n                      if (interdepA[_j] === nodos[k].id) {\n                        // Compara dependencias(1) con IDs de MS\n                        for (var l = 0; l < interdepB.length; l++) {\n                          if (interdepB[l] === nodos[_i].id) {\n                            // Compara dependencias(2) con IDs de MS\n                            interdependencias = interdependencias.concat(nodos[k].id);\n                            LC--;\n                          }\n                        }\n                      }\n                    }\n                  };\n\n                  // para comparar cada dependencia(1)\n                  for (var k = 0; k < nodos.length; k++) {\n                    _loop6(k);\n                  }\n                }\n\n                SIY = interdependencias.length / CantidadMSs;\n                nodos[_i].coupling_SIY = SIY.toFixed(2);\n                SIYT = SIYT + Math.pow(SIY, 2); // Sumatoria de los cuadrados\n                // C√°lculo de Cohesion Lack  y Grade\n\n                nodos[_i].cohesion_lack = LC;\n                Coh = LC / CantidadMSs;\n                nodos[_i].cohesion_grade = Coh.toFixed(2);\n                CohT = CohT + Math.pow(Coh, 2); // Sumatoria de los cuadrados\n                // C√°lculo de la similitud sem√°ntica\n\n                SsT = SsT + nodos[_i].semantic_similarity; // Sumatoria previa\n\n                /*        Otros         */\n\n                rendimiento = rendimiento + nodos[_i].calls; // cg = MSpuntos * (MScalls + MSrequests)\n\n                nodos[_i].cg = nodos[_i].points * (nodos[_i].calls + MSrequests.length);\n                console.log(nodos[_i].id + \".cg: \" + nodos[_i].cg.toFixed(2)); //\n\n                if (nodos[_i].points > maxMSpoints) {\n                  maxMSpoints = nodos[_i].points;\n                }\n              }\n            };\n\n            for (_i = 0; _i < nodos.length; _i++) {\n              _loop3(_i);\n            }\n\n            AIST = Math.sqrt(AIST);\n            ADST = Math.sqrt(ADST);\n            SIYT = Math.sqrt(SIYT);\n            CpT = Math.sqrt(Math.pow(AIST, 2) + Math.pow(ADST, 2) + Math.pow(SIYT, 2));\n            CohT = Math.sqrt(CohT);\n            SsT = SsT * (100 / CantidadMSs);\n            /*          Otros           */\n\n            rendimiento = rendimiento / CantidadMSs;\n            console.log(\"Rendimiento: \" + rendimiento.toFixed(2));\n            console.log(\"Max ponits: \" + maxMSpoints.toFixed(2));\n            diagramaCargado = true;\n            init();\n\n          case 35:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _convertir_jsonAnodos.apply(this, arguments);\n}\n\nfunction convertir_nodosAjson(nodosAjson) {\n  json = [];\n  var hu = [];\n  var microservicios = [];\n  microservicios = nodosAjson.filter(function (item) {\n    return item.componente === 'microservicio';\n  });\n\n  var _loop = function _loop(i) {\n    hu = nodosAjson.filter(function (item) {\n      return item.componente === 'historia' && item.group === microservicios[i].key;\n    });\n    json = json.concat({\n      \"cohesion_lack\": microservicios[i].cohesion_lack,\n      \"cohesion_grade\": microservicios[i].cohesion_grade,\n      \"complexity\": microservicios[i].complexity,\n      \"id\": microservicios[i].key,\n      \"points\": microservicios[i].points,\n      \"semantic_similarity\": microservicios[i].semantic_similarity,\n      \"userStories\": hu\n    });\n  };\n\n  for (var i = 0; i < Object(microservicios).length; i++) {\n    _loop(i);\n  }\n}\n\nfunction nuevoMSid() {\n  // Retorna un nuevo ID no usado en el diagrama\n  proximoMS = \"\";\n  var MSs = nodos.filter(function (nodo) {\n    return nodo.componente === \"microservicio\";\n  });\n  var nombres = MSs.map(function (nodo) {\n    return nodo.id.replace(\"MS\", \"\");\n  });\n  nombres.sort();\n  var nums = nombres.map(function (str) {\n    return parseInt(str);\n  });\n\n  for (var i = 1; i < nums.length + 2; i++) {\n    if (i !== nums[i - 1]) {\n      proximoMS = \"MS\" + i;\n      return proximoMS;\n    }\n  }\n}\n\nfunction crearMicroservicio(ms, us) {\n  json = json.concat({\n    \"cohesion_lack\": 0,\n    \"cohesion_grade\": 0,\n    \"complexity\": 0,\n    \"id\": ms,\n    \"points\": 0,\n    \"semantic_similarity\": 0,\n    \"userStories\": us\n  });\n}\n\nfunction formatearUS(historia) {\n  var historiaFormateada = [{\n    \"id\": historia.id,\n    \"name\": historia.name,\n    \"actor\": historia.actor,\n    \"points\": historia.points,\n    \"project\": historia.project,\n    \"priority\": historia.priority,\n    \"dependencies\": historia.dependencies\n  }];\n  return historiaFormateada;\n}\n\nfunction quitarUSdeMS(ms, us) {\n  for (var i = 0; i < Object(json).length; i++) {\n    if (json[i].id === ms) {\n      for (var j = 0; j < json[i].userStories.length; j++) {\n        if (json[i].userStories[j].id === us[0].id) {\n          json[i].userStories.splice(j, 1);\n          return;\n        }\n      }\n\n      return;\n    }\n  }\n}\n\nfunction init() {\n  var $ = go.GraphObject.make; // set your license key here before creating the diagram: go.Diagram.licenseKey = \"...\";\n\n  myDiagram = $(go.Diagram, \"myDiagramDiv\", {\n    // create a Diagram for the DIV HTML element       \n    \"animationManager.initialAnimationStyle\": go.AnimationManager.AnimateLocations,\n    //autoScale: go.Diagram.Uniform,  // scale always has all content fitting in the viewport\n    // decide what kinds of Parts can be added to a Group or to top-level\n    \"commandHandler.memberValidation\": function commandHandlerMemberValidation(grp, node) {\n      if (grp != null) {\n        // maybe allow dropping groups in diagram's background\n        if (node instanceof go.Group) {\n          // No deja agregar un grupo a otro grupo\n          return false;\n        }\n\n        return true;\n      }\n    },\n    \"undoManager.isEnabled\": true,\n    // Habilita deshacer y rehacer\n    contentAlignment: go.Spot.Center,\n    // Centra el contenido en el viewport (ventana gr√°fica)\n    isReadOnly: false,\n    // No permite modificar\n    mouseDrop: function mouseDrop(e, grp) {\n      // Devuelve al nodo a su posici√≥n original cuando se arrastra afuera\n      var nodoSeleccionado = myDiagram.selection; // Guarda el US seleccionado\n\n      var nuevaHistoria = formatearUS(nodoSeleccionado.ea.key.qb);\n\n      try {\n        var MSnombre = nodoSeleccionado.ea.key.qb.group; // Nombre del grupo\n\n        var MScompleto = e.diagram.findNodeForKey(MSnombre);\n\n        if (MScompleto.qb.userStories > 1) {\n          var proximo = nuevoMSid(); // Crea un nuevo id de MS no repetido\n\n          quitarUSdeMS(MSnombre, nuevaHistoria);\n          crearMicroservicio(proximo, nuevaHistoria); // Crea nuevo MS y le asigna el id reci√©n creado\n\n          nuevoDiagrama();\n        } else {\n          myDiagram.currentTool.doCancel();\n        }\n      } catch (error) {}\n    },\n    mouseDragOver: function mouseDragOver() {\n      myDiagram.currentCursor = \"grabbing\";\n      myDiagram.clearHighlighteds();\n    },\n    click: function click() {\n      myDiagram.currentCursor = \"grabbing\";\n      myDiagram.clearHighlighteds();\n    }\n  });\n  myDiagram.groupTemplate = $(go.Group, \"Vertical\", {\n    // 'Vertical' Pone el nombre del nodo arriba    \n    deletable: false,\n    // No permite borrar el grupo\n    copyable: false,\n    //isActionable: true,\n    handlesDragDropForMembers: true,\n    // don't need to define handlers on Nodes and Links\n    computesBoundsAfterDrag: true // Permite arrastrar la historia fuera del\n    // microservicio sin deformarlo\n\n  }, {\n    mouseOver: function mouseOver(e) {\n      e.diagram.currentCursor = \"grab\";\n    },\n    // Para cambiar el fill (color) cuando el cursor entra o sale\n    mouseEnter: function mouseEnter(e, obj) {\n      var microservicio = obj.findObject(\"MICROSERVICIO\");\n      microservicio.fill = \"rgb(68, 100, 66)\";\n      obj.currentCursor = \"hand\";\n    },\n    mouseLeave: function mouseLeave(e, obj) {\n      var microservicio = obj.findObject(\"MICROSERVICIO\");\n      microservicio.fill = \"rgba(125, 200, 120, .6)\";\n    },\n    click: function click(e, node) {\n      document.getElementById('titulo').innerHTML = 'MICROSERVICE METRICS';\n      var diagram = node.diagram; // remove any previous highlighting\n\n      diagram.clearHighlighteds(); // highlight all Links and Nodes coming out of a given Node\n\n      diagram.startTransaction(\"highlight\"); //diagram.clearHighlighteds();\n      // for each Link coming out of the Node, set Link.isHighlighted\n\n      node.findLinksOutOf().each(function (l) {\n        l.isHighlighted = true;\n      }); // for each Node destination for the Node, set Node.isHighlighted\n\n      node.findNodesOutOf().each(function (n) {\n        n.isHighlighted = true;\n      });\n      diagram.commitTransaction(\"highlight\");\n    },\n    // what to do when a drag-over or a drag-drop occurs on a Group\n    mouseDragEnter: function mouseDragEnter(e, grp, prev) {\n      if (grp.canAddMembers(grp.diagram.toolManager.draggingTool.draggingParts)) {\n        var shape = grp.findObject(\"MICROSERVICIO\");\n\n        if (shape) {\n          shape.fill = \"chartreuse\";\n        }\n\n        grp.diagram.currentCursor = \"\";\n      } else {\n        grp.diagram.currentCursor = \"no-drop\";\n      }\n    },\n    mouseDragLeave: function mouseDragLeave(e, grp, next) {\n      var shape = grp.findObject(\"MICROSERVICIO\");\n\n      if (shape) {\n        shape.fill = \"rgba(125, 200, 120, .6)\";\n      }\n\n      grp.diagram.currentCursor = \"\";\n    },\n    mouseDrop: function mouseDrop(e, grp) {\n      var ok = grp.addMembers(grp.diagram.selection, true);\n\n      if (!ok) {\n        grp.diagram.currentTool.doCancel();\n        return;\n      }\n\n      convertir_nodosAjson(nodos);\n      nuevoDiagrama();\n    }\n  }, new go.Binding(\"layout\", \"columnas\", function (c) {\n    return $(go.GridLayout, {\n      wrappingColumn: c,\n      // Determina cantidad de columnas\n      cellSize: new go.Size(0, 0),\n      // Determina ancho de columnas\n      spacing: new go.Size(0, 0) // Determina espacio entre columnas\n\n    });\n  }), // Inhabilitar el movimiento de los nodos resaltados:\n  //new go.Binding(\"isActionable\", \"isHighlighted\", function (h) {\n  //return h ? true : false;\n  //}).ofObject(),\n  $(go.Panel, \"Spot\", //$(go.Shape, \"Hexagon\", {\n  $(go.Shape, \"Cube1\", {\n    name: \"MICROSERVICIO\",\n    fill: \"rgba(125, 200, 120, .6)\"\n  }, new go.Binding(\"stroke\", \"isHighlighted\", function (h) {\n    return h ? \"red\" : null;\n  }).ofObject(), new go.Binding(\"stroke\", \"isSelected\", function (h) {\n    return h ? \"rgb(30,144,255)\" : null;\n  }).ofObject(), new go.Binding(\"strokeWidth\", \"isHighlighted\", function (h) {\n    return h ? 2 : 3;\n  }).ofObject(), new go.Binding(\"width\", \"size\"), // Asigna al ancho el valor de size\n  new go.Binding(\"height\", \"size\") // Asigna a la altura el valor de size\n  ), $(go.TextBlock, \"text\", new go.Binding(\"text\", \"key\"), // Asigna al texto el valor de key\n  new go.Binding(\"alignment\", \"textoID\", function (c) {\n    return new go.Spot(0.5, c); // Asigna valor a Y en la posici√≥n del\n  })), $(go.Placeholder, {\n    // Centra las HUs en el hex√°gono del microservicio\n    padding: 1\n  })));\n  myDiagram.nodeTemplate = $(go.Node, \"Auto\", {\n    // 'Auto' Ajusta el tama√±o del elemento seg√∫n sus subelementos. \n    locationSpot: go.Spot.Center,\n    copyable: false,\n    deletable: false // No permite borrar el nodo\n\n  }, {\n    mouseOver: function mouseOver(e, node) {\n      e.diagram.currentCursor = \"grab\";\n    },\n    // Para cambiar el fill (color) cuando el cursor entra o sale\n    mouseEnter: function mouseEnter(e, obj) {\n      var microservicio = obj.findObject(\"HISTORIA\");\n      microservicio.fill = \"gray\";\n      obj.currentCursor = \"hand\";\n    },\n    mouseLeave: function mouseLeave(e, obj) {\n      var microservicio = obj.findObject(\"HISTORIA\");\n      microservicio.fill = \"white\";\n    },\n    click: function click(e, node) {\n      document.getElementById('titulo').innerHTML = 'STORY METRICS';\n      var diagram = node.diagram; // remove any previous highlighting\n\n      diagram.clearHighlighteds();\n    }\n  }, $(go.Shape, \"RoundedRectangle\", {\n    name: \"HISTORIA\",\n    fill: \"white\"\n  }), $(go.TextBlock, \"text\", new go.Binding(\"text\", \"key\") // Asigna al texto el valor de key\n  ));\n  myDiagram.linkTemplate = $(go.Link, {\n    curve: go.Link.Bezier,\n    reshapable: true,\n    deletable: false // No permite borrar la flecha\n\n  }, // No necesita guardar Link.points, por lo que no necesita TwoWay Binding en \"puntos\"\n  new go.Binding(\"curviness\", \"curviness\").makeTwoWay(), // pero guarda \"curvas\" autom√°ticamente\n  $(go.Shape, {\n    // Caracter√≠sticas del cuerpo de la flecha       \n    strokeWidth: 2\n  }, new go.Binding(\"stroke\", \"isHighlighted\", function (h) {\n    return h ? \"red\" : \"black\";\n  }).ofObject()), $(go.Shape, {\n    // Caracter√≠sticas de la cabeza de la flecha  \n    toArrow: \"standard\",\n    // Forma de la cabeza de la flecha  \n    stroke: \"white\" // Borde de la cabeza de flecha\n\n  })); // Crea el modelo del diagrama a mostrar\n\n  myDiagram.model = new go.GraphLinksModel(nodos, aristas); // some shared model data\n\n  myDiagram.model.modelData = {\n    \"AIST\": AIST.toFixed(2),\n    \"ADST\": ADST.toFixed(2),\n    \"SIYT\": SIYT.toFixed(2),\n    \"CpT\": CpT.toFixed(2),\n    \"CohT\": CohT.toFixed(2),\n    \"SsT\": SsT.toFixed(2),\n    \"WsicT\": WsicT\n  }; // Show the primary selection's data, or blanks if no Part is selected:\n  // eslint-disable-next-line\n\n  var inspector = new Inspector('myInspectorDiv', myDiagram, {\n    //showAllProperties: true,\n    includesOwnProperties: false,\n    // Para no mostrar todas las propiedades \n    inspectSelection: true,\n    properties: {\n      // Declarar las propiedades que se quieren inspeccionar\n      \"id\": {\n        readOnly: true,\n        // Para que no se pueda editar\n        show: Inspector.showIfPresent\n      },\n      \"points\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"dependencies\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"coupling_AIS\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"coupling_ADS\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"coupling_SIY\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"cohesion_lack\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"cohesion_grade\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"complexity\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"semantic_similarity\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"actor\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"group\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"name\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"priority\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"project\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      }\n    }\n  }); // Siempre muestra el model.modelData:\n\n  var inspector2 = new Inspector('myInspectorDiv2', myDiagram, {\n    inspectSelection: false,\n    properties: {\n      \"AIST\": {\n        readOnly: true\n      },\n      \"ADST\": {\n        readOnly: true\n      },\n      \"SIYT\": {\n        readOnly: true\n      },\n      \"CpT\": {\n        readOnly: true\n      },\n      \"CohT\": {\n        readOnly: true\n      },\n      \"SsT\": {\n        readOnly: true\n      },\n      \"WsicT\": {\n        readOnly: true\n      }\n    }\n  });\n  inspector2.inspectObject(myDiagram.model.modelData);\n} // fin del Init()\n\n\nfunction validarJson(schema, jsonCargado) {\n  var Ajv = require(\"ajv\");\n\n  var ajv = new Ajv({\n    allErrors: true\n  });\n  var validate = ajv.compile(schema);\n  var valid = validate(jsonCargado);\n\n  if (!valid) {\n    console.log(validate.errors);\n    swal({\n      title: \"Invalid schema\",\n      icon: \"error\",\n      timer: 2000\n    });\n    return false;\n  } else {\n    return true;\n  }\n}\n\nexport function leerArchivo(e) {\n  var archivo = e.target.files[0];\n\n  if (!archivo) {\n    return;\n  }\n\n  if (diagramaCargado) {\n    myDiagram.div = null;\n    myDiagram = null;\n  }\n\n  json = [];\n  var lector = new FileReader();\n\n  lector.onload = function (e) {\n    var jsonData = e.target.result;\n    json = JSON.parse(jsonData);\n\n    var schema = require('./schemas/microservices.json');\n\n    var esValido = validarJson(schema, json);\n\n    if (esValido) {\n      convertir_jsonAnodos();\n    }\n  };\n\n  lector.readAsText(archivo);\n  document.getElementById(\"miInput\").value = null;\n}\n\nfunction formatearDependencias() {\n  // Quita los nombres de las dependencias y las\n  var dependencias = []; // deja como un arreglo de strings (historias)\n\n  for (var i = 0; i < userStory.length; i++) {\n    dependencias = [];\n\n    for (var j = 0; j < userStory[i].dependencies.length; j++) {\n      dependencias = dependencias.concat(userStory[i].dependencies[j].id);\n    }\n\n    userStory[i].dependencies = dependencias;\n  }\n}\n\nfunction verificarHistoria() {\n  // Verifica la existencia de una historia de usuario \n  // en un diagrama de microservicios\n  for (var h = 0; h < userStory.length; h++) {\n    for (var i = 0; i < json.length; i++) {\n      for (var j = 0; j < json[i].userStories.length; j++) {\n        if (json[i].userStories[j].id === userStory[h].id) {\n          swal({\n            title: \"The story \" + userStory[h].id + \" is already in the project\",\n            text: \"Operation cancelled\",\n            icon: \"warning\"\n          });\n          return true;\n        }\n      }\n    }\n  }\n\n  formatearDependencias();\n  swal({\n    title: \"Stories included succesfully\",\n    icon: \"success\",\n    timer: 1500\n  });\n  return false;\n}\n\nfunction quitarGuionesMedios(us) {\n  for (var i = 0; i < us.length; i++) {\n    us[i].id = us[i].id.replace(\"-\", \"\");\n\n    for (var j = 0; j < us[i].dependencies.length; j++) {\n      us[i].dependencies[j].id = us[i].dependencies[j].id.replace(\"-\", \"\");\n    }\n  }\n\n  return us;\n}\n\nfunction agregarHistoria(e) {\n  if (diagramaCargado) {\n    var archivo = e.target.files[0];\n\n    if (!archivo) {\n      return;\n    }\n\n    var lector = new FileReader();\n\n    lector.onload = function (e) {\n      var userStoryData = e.target.result;\n      var file = JSON.parse(userStoryData);\n      userStory = file.userStories;\n\n      var schema = require('./schemas/userStories.json');\n\n      var esValido = validarJson(schema, userStory);\n\n      if (esValido) {\n        userStory = quitarGuionesMedios(userStory);\n        var existeHistoria = verificarHistoria();\n\n        if (!existeHistoria) {\n          var micro_servicio = nuevoMSid();\n          crearMicroservicio(micro_servicio, userStory);\n          nuevoDiagrama();\n        }\n      }\n    };\n\n    lector.readAsText(archivo);\n  } else {\n    swal({\n      title: \"Cargue un diagrama primero\",\n      icon: \"error\",\n      timer: 2000\n    });\n  }\n\n  document.getElementById(\"miInput2\").value = null;\n}\n\nfunction exportarJson() {\n  if (diagramaCargado) {\n    var dataStr = JSON.stringify(json);\n    var dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n    var exportFileDefaultName = 'data.json'; // Asigna un nombre al archivo\n\n    var linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  } else {\n    swal({\n      title: \"Cargue un diagrama primero\",\n      icon: \"error\",\n      timer: 2000\n    });\n  }\n}\n\nfunction nuevoDiagrama() {\n  if (diagramaCargado === true) {\n    myDiagram.div = null;\n    myDiagram = null;\n  }\n\n  convertir_jsonAnodos();\n  diagramaCargado = true;\n} // render function...\n\n\nexport function App() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 847,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"spanEncabezado\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 848,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"encabezado\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 849,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"spanInspector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 851,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fondoInspector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 852,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"inputsDiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 853,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-select\",\n    id: \"src-file1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 854,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onInput: leerArchivo,\n    className: \"boton\",\n    type: \"file\",\n    id: \"miInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 855,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-select\",\n    id: \"src-file2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 857,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onInput: agregarHistoria,\n    className: \"boton\",\n    type: \"file\",\n    id: \"miInput2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 858,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-select\",\n    id: \"src-file3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 860,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: exportarJson,\n    className: \"boton\",\n    type: \"button\",\n    id: \"miInput3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"h3\", {\n    id: \"titulo\",\n    className: \"informacion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 864,\n      columnNumber: 11\n    }\n  }, \"METRICS\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"myInspectorDiv\",\n    className: \"inspector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 865,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"span\", {\n    id: \"spanDiagram\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 868,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"myDiagramDiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 869,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"spanInspector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 871,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fondoInspector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 872,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"informacion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 873,\n      columnNumber: 11\n    }\n  }, \"APP METRICS:\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"myInspectorDiv2\",\n    className: \"inspector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 874,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 875,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"informacion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 876,\n      columnNumber: 13\n    }\n  }, \"MICROSERVICE SIZE:\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 877,\n      columnNumber: 13\n    }\n  }, \"STORIES\", /*#__PURE__*/React.createElement(\"input\", {\n    id: \"stories\",\n    onClick: nuevoDiagrama,\n    type: \"radio\",\n    defaultChecked: \"checked\",\n    name: \"radio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 878,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"checkmark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 879,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 881,\n      columnNumber: 13\n    }\n  }, \"POINTS\", /*#__PURE__*/React.createElement(\"input\", {\n    id: \"points\",\n    onClick: nuevoDiagrama,\n    type: \"radio\",\n    name: \"radio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 882,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"checkmark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 883,\n      columnNumber: 15\n    }\n  }))))));\n}\n/*        C√≥digo pregunta en SweetAlert\nswal({\n  title: \"T√≠tulo de la pregunta\",\n  text: \"Acepta esta pregunta?\",\n  icon: \"warning\",\n  buttons: ['Cancelar', 'Aceptar']\n}).then(respuesta => {\n  if (respuesta) {\n    swal({\n      title: \"Acept√≥ la pregunta\",\n      icon: \"success\",\n      timer: 1500\n    })\n  }\n})\n*/\n//function mostrarContenido(contenido) {\n//  var elemento = document.getElementById('contenido-archivo');\n//  elemento.innerHTML = contenido; // Inyecta un contenido a un elemento HTML en la p√°gina\n//}\n//<script>\n//addEventListener = {document.addEventListener('change', LeerArchivo, false)}\n//</script>\n//export default App\n// Si se habilita esta l√≠nea, se ejecuta la funci√≥n Init cuando el HTML carga el script\n//window.addEventListener('DOMContentLoaded', Init);","map":{"version":3,"names":["React","go","Inspector","swal","myDiagram","nodos","aristas","diagramaCargado","json","userStory","proximoMS","CantidadMSs","AIST","ADST","SIYT","CpT","Coh","CohT","WsicT","SsT","maxMSpoints","similitud_semantica","nombres_HU","resultado","cadena","similitudSemantica","length","i","encodedValue","encodeURIComponent","Promise","resolve","reject","fetch","method","headers","then","response","setTimeout","parseFloat","semantic_similarity","catch","err","title","text","icon","timer","convertir_jsonAnodos","MSdependencias","MScalls","MSpuntos","nombresHU","j","concat","userStories","name","points","Object","actor","componente","dependencies","group","id","key","priority","project","k","from","to","l","m","filter","item","index","indexOf","Math","ceil","sqrt","complexity","document","getElementById","checked","calls","cg","coupling_AIS","coupling_ADS","coupling_SIY","cohesion_lack","cohesion_grade","columnas","isGroup","requests","size","textoID","pow","undefined","rendimiento","LC","MSrequests","MSimportancia","interdependencias","interdepA","interdepB","SIY","toFixed","console","log","init","convertir_nodosAjson","nodosAjson","hu","microservicios","nuevoMSid","MSs","nodo","nombres","map","replace","sort","nums","str","parseInt","crearMicroservicio","ms","us","formatearUS","historia","historiaFormateada","quitarUSdeMS","splice","$","GraphObject","make","Diagram","AnimationManager","AnimateLocations","grp","node","Group","contentAlignment","Spot","Center","isReadOnly","mouseDrop","e","nodoSeleccionado","selection","nuevaHistoria","ea","qb","MSnombre","MScompleto","diagram","findNodeForKey","proximo","nuevoDiagrama","currentTool","doCancel","error","mouseDragOver","currentCursor","clearHighlighteds","click","groupTemplate","deletable","copyable","handlesDragDropForMembers","computesBoundsAfterDrag","mouseOver","mouseEnter","obj","microservicio","findObject","fill","mouseLeave","innerHTML","startTransaction","findLinksOutOf","each","isHighlighted","findNodesOutOf","n","commitTransaction","mouseDragEnter","prev","canAddMembers","toolManager","draggingTool","draggingParts","shape","mouseDragLeave","next","ok","addMembers","Binding","c","GridLayout","wrappingColumn","cellSize","Size","spacing","Panel","Shape","h","ofObject","TextBlock","Placeholder","padding","nodeTemplate","Node","locationSpot","linkTemplate","Link","curve","Bezier","reshapable","makeTwoWay","strokeWidth","toArrow","stroke","model","GraphLinksModel","modelData","inspector","includesOwnProperties","inspectSelection","properties","readOnly","show","showIfPresent","inspector2","inspectObject","validarJson","schema","jsonCargado","Ajv","require","ajv","allErrors","validate","compile","valid","errors","leerArchivo","archivo","target","files","div","lector","FileReader","onload","jsonData","result","JSON","parse","esValido","readAsText","value","formatearDependencias","dependencias","verificarHistoria","quitarGuionesMedios","agregarHistoria","userStoryData","file","existeHistoria","micro_servicio","exportarJson","dataStr","stringify","dataUri","exportFileDefaultName","linkElement","createElement","setAttribute","App"],"sources":["C:/visualizacion_microservicios - copia/src/App.js"],"sourcesContent":["//************* Imports *****************/\nimport React from 'react';\nimport * as go from 'gojs';\nimport '../node_modules/gojs/extensions/Figures'\nimport { Inspector } from '../node_modules/gojs/extensionsJSM/DataInspector.js'\nimport './css/App.css';  // contains .diagram-component CSS\nimport swal from 'sweetalert'\n\n//************ Variables ****************/\n\nvar myDiagram;\nvar nodos = [];\nvar aristas = [];\nvar diagramaCargado = false;\nvar json;\nvar userStory = [];\nvar proximoMS = \"\";\nvar CantidadMSs = 0;\n\nvar AIST = 0; // Acoplamiento AIS total\nvar ADST = 0; // Acoplamiento ADS total\nvar SIYT = 0; // Acoplamiento SIY total\nvar CpT = 0;  // Acoplamiento total de la aplicaci√≥n\n\nvar Coh = 0;  // Cohesion grade total\nvar CohT = 0; // Cohesi√≥n total de la aplicaci√≥n\n\nvar WsicT = 0;// mayor n√∫mero de historias de usuario asociadas a un microservicio\n//var CxT = 0;  // Complejidad cognitiva total de la aplicaci√≥n\nvar SsT = 0;  // Similitud sem√°ntica total de la aplicaci√≥n\n/*\nùëÄùëÜùêµùê¥=(ùëÄùëÜ, ùëÄùëá¬†‚Éó) \nDonde:\nùëÄùëÜùêµùê¥ = MicroServices Based Application\nMS es un conjunto de microservicios MS = {ms1, ms2, ‚Ä¶, msn} \nùëÄùëá¬†‚Éó es un vector de m√©tricas calculadas para MSBA\n\nùëÄùëá¬†‚Éó=[ùê∂ùëùùëá, ùê∂ùëú‚Ñéùëá, ùëäùë†ùëñùëêùëá, ùê∂ùë•ùëá,(100‚àí ùëÜùë†ùëá)]\nDonde:\nCpT es el acoplamiento, \nCohT es la cohesi√≥n, \nWsicT es el mayor n√∫mero de historias de usuario asociadas a un microservicio, \nCxT son los puntos de complejidad cognitiva, y \nSsT es la similitud sem√°ntica; Las cuales son m√©tricas calculadas para MSBA\n*/\n\n/* Cx = (sum(cùëî)) + maxMSpoints + (CantidadMSs*WsicT) + (sum(Pf)) + (sum(SIY)) */\nvar maxMSpoints = 0;\n//var Pf = 0; // N√∫mero (m√°ximo?) de llamadas secuenciales entre microservicios\n\n/* CxT = Cx / Cxo */\n\n//************ Funciones ****************/\n\nasync function similitud_semantica(nombres_HU) {\n  var resultado = \"\";\n  var cadena = \"\";\n  var similitudSemantica = 0;\n  if (nombres_HU.length > 1) {\n    cadena = nombres_HU[0];\n    for (let i = 1; i < nombres_HU.length; i++) {\n      cadena = cadena + \"/\" + nombres_HU[i];\n    }\n    const encodedValue = encodeURIComponent(cadena);\n    await new Promise((resolve, reject) => {\n      fetch(`http://localhost:8000/api/?user_stories=${encodedValue}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n      }).then(function (response) {\n        setTimeout(() => {\n          resolve(response)\n        }, 50);\n        return response.json();\n      }).then(json => {\n        resultado = json;\n        similitudSemantica = parseFloat(resultado.semantic_similarity)\n      }).catch(function (err) {\n        swal({\n          title: \"\" + err,\n          text: \"Error\",\n          icon: \"error\",\n          timer: 5000\n        })\n        diagramaCargado = false;\n      })\n    });\n  } else {\n    similitudSemantica = 1;\n  }\n  return similitudSemantica;\n}\n\nasync function convertir_jsonAnodos() {\n\n  AIST = 0;\n  ADST = 0;\n  SIYT = 0;\n  CpT = 0;\n  Coh = 0;\n  CohT = 0;\n  WsicT = 0;\n  SsT = 0;\n  CantidadMSs = 0;\n  maxMSpoints = 0;\n  nodos = [];\n  aristas = [];\n\n  for (let i = 0; i < Object(json).length; i++) {\n    var MSdependencias = [];\n    var MScalls = [];\n    var MSpuntos = 0;\n    var nombresHU = [];\n    for (let j = 0; j < Object(json[i].userStories).length; j++) {\n      nombresHU = nombresHU.concat(json[i].userStories[j].name);\n      MSpuntos = MSpuntos + json[i].userStories[j].points;\n      if (Object(json[i].userStories).length > WsicT) {\n        WsicT = Object(json[i].userStories).length;\n      };\n      nodos = nodos.concat({\n        actor: json[i].userStories[j].actor,\n        componente: \"historia\",\n        dependencies: json[i].userStories[j].dependencies,\n        group: json[i].id,\n        id: json[i].userStories[j].id,\n        key: json[i].userStories[j].id,\n        name: json[i].userStories[j].name,\n        priority: json[i].userStories[j].priority,\n        project: json[i].userStories[j].project,\n        points: json[i].userStories[j].points\n      });\n      for (let k = 0; k < Object(json[i].userStories[j].dependencies).length; k++) {\n        aristas = aristas.concat({\n          from: json[i].id,\n          // eslint-disable-next-line\n          to: (function () {\n            for (let l = 0; l < Object(json).length; l++) {\n              for (let m = 0; m < Object(json[l].userStories).length; m++) {\n                if (json[i].userStories[j].dependencies[k] === json[l].userStories[m].id) {\n                  if (json[i].id !== json[l].id) { // Si son diferentes MS's se asigna el valor a 'to'.\n                    MScalls = MScalls.concat(json[l].id);\n                    return json[l].id;\n                  }\n                }\n              }\n            }\n          })()\n        });\n      }\n    }\n\n    /* Hacer este filter abajo si se quieren mostrar las dependencias repetidas en el Inspector*/\n    // eslint-disable-next-line\n    MSdependencias = MScalls.filter((item, index) => {// Quita las dependencias repetidas\n      return MScalls.indexOf(item) === index;\n    })\n\n    if (json[i].userStories.length !== 0) {\n      CantidadMSs++;\n      nodos = nodos.concat({\n        calls: MScalls.length,\n        cg: 0,\n        coupling_AIS: 0,\n        coupling_ADS: MSdependencias.length,\n        coupling_SIY: 0,\n        cohesion_lack: 0,\n        cohesion_grade: 0,\n        columnas: Math.ceil(Math.sqrt(json[i].userStories.length)),\n        complexity: json[i].complexity,\n        componente: \"microservicio\",\n        dependencies: MSdependencias, // o 'MScalls' si quiere mostrar repetidos \n        isGroup: true,\n        id: json[i].id,\n        key: json[i].id,\n        points: MSpuntos,\n        requests: 0,\n        semantic_similarity: await similitud_semantica(nombresHU),\n        // eslint-disable-next-line\n        size: (function () {\n          if (document.getElementById('stories').checked) {\n            return 45 + (json[i].userStories.length * 12);\n          } else {\n            return 45 + (MSpuntos * 12);\n          }\n        })(),\n        textoID: 0.23 - ((((45 + (json[i].userStories.length * 12)) - 57) * 0.12) / 100),\n        userStories: json[i].userStories.length\n      });\n    }\n    ADST = ADST + Math.pow(MSdependencias.length, 2) // Sumatoria de los cuadrados\n  };\n\n  // Quitar las aristas con 'to' undefined\n  aristas = aristas.filter((item) => item.to !== undefined);\n\n  var rendimiento = 0;\n\n  // C√°lculo de los acomplamientos AIS y SIY\n  for (let i = 0; i < nodos.length; i++) {\n    if (nodos[i].componente === \"microservicio\") {\n      var LC = CantidadMSs - 1; // Cohesion Lack\n\n      // C√°lculo del acomplamiento AIS (Cantidad de aristas que le entran)\n      var MSrequests = [];\n      var MSimportancia = [];\n      for (let j = 0; j < aristas.length; j++) {\n        if (nodos[i].id === aristas[j].to) {\n          MSrequests = MSrequests.concat(aristas[j].from);\n        }\n      }\n      // eslint-disable-next-line\n      MSimportancia = MSrequests.filter((item, index) => {// Quita las importancias\n        return MSrequests.indexOf(item) === index;      // repetidas\n      })\n      nodos[i].requests = MSrequests.length;\n      nodos[i].coupling_AIS = MSimportancia.length;\n      AIST = AIST + Math.pow(MSimportancia.length, 2); // Sumatoria de los cuadrados\n\n      // C√°lculo del acomplamiento SIY (interdependencias / cantidad de MS's)\n      var interdependencias = [];\n      // eslint-disable-next-line\n      var interdepA = nodos[i].dependencies.filter((item, index) => {// Quita las depen-\n        return nodos[i].dependencies.indexOf(item) === index;// dencias(1) repetidas\n      })\n      for (let j = 0; j < interdepA.length; j++) { // para comparar cada dependencia(1)\n        for (let k = 0; k < nodos.length; k++) { // Inicia de nuevo en todos los nodos\n          if (nodos[k].componente === \"microservicio\") { // solo los nodos MS's\n            // eslint-disable-next-line\n            var interdepB = nodos[k].dependencies.filter((item, index) => {\n              return nodos[k].dependencies.indexOf(item) === index;\n            }) // Quita las dependencias(2) repetidas\n            if (interdepA[j] === nodos[k].id) { // Compara dependencias(1) con IDs de MS\n              for (let l = 0; l < interdepB.length; l++) {\n                if (interdepB[l] === nodos[i].id) { // Compara dependencias(2) con IDs de MS\n                  interdependencias = interdependencias.concat(nodos[k].id);\n                  LC--;\n                }\n              }\n            }\n          }\n        }\n      }\n      var SIY = (interdependencias.length / CantidadMSs)\n      nodos[i].coupling_SIY = SIY.toFixed(2);\n      SIYT = SIYT + Math.pow(SIY, 2); // Sumatoria de los cuadrados\n\n      // C√°lculo de Cohesion Lack  y Grade\n      nodos[i].cohesion_lack = LC;\n      Coh = LC / CantidadMSs;\n      nodos[i].cohesion_grade = Coh.toFixed(2);\n      CohT = CohT + Math.pow(Coh, 2); // Sumatoria de los cuadrados\n\n      // C√°lculo de la similitud sem√°ntica\n      SsT = SsT + nodos[i].semantic_similarity // Sumatoria previa\n\n      /*        Otros         */\n      rendimiento = rendimiento + nodos[i].calls;\n      // cg = MSpuntos * (MScalls + MSrequests)\n      nodos[i].cg = nodos[i].points * (nodos[i].calls + MSrequests.length);\n      console.log(nodos[i].id + \".cg: \" + nodos[i].cg.toFixed(2));\n      //\n      if (nodos[i].points > maxMSpoints) {\n        maxMSpoints = nodos[i].points;\n      }\n    }\n  }\n  AIST = Math.sqrt(AIST);\n  ADST = Math.sqrt(ADST);\n  SIYT = Math.sqrt(SIYT);\n  CpT = Math.sqrt(Math.pow(AIST, 2) + Math.pow(ADST, 2) + Math.pow(SIYT, 2));\n  CohT = Math.sqrt(CohT);\n  SsT = SsT * (100 / CantidadMSs);\n\n  /*          Otros           */\n  rendimiento = rendimiento / CantidadMSs;\n  console.log(\"Rendimiento: \" + rendimiento.toFixed(2));\n  console.log(\"Max ponits: \" + maxMSpoints.toFixed(2));\n\n  diagramaCargado = true;\n  init();\n}\n\nfunction convertir_nodosAjson(nodosAjson) {\n  json = [];\n  var hu = [];\n  var microservicios = [];\n  microservicios = nodosAjson.filter((item) => item.componente === 'microservicio')\n\n  for (let i = 0; i < Object(microservicios).length; i++) {\n    hu = nodosAjson.filter((item) => (\n      item.componente === 'historia' && item.group === microservicios[i].key\n    ))\n    json = json.concat({\n      \"cohesion_lack\": microservicios[i].cohesion_lack,\n      \"cohesion_grade\": microservicios[i].cohesion_grade,\n      \"complexity\": microservicios[i].complexity,\n      \"id\": microservicios[i].key,\n      \"points\": microservicios[i].points,\n      \"semantic_similarity\": microservicios[i].semantic_similarity,\n      \"userStories\": hu\n    });\n  }\n}\n\nfunction nuevoMSid() { // Retorna un nuevo ID no usado en el diagrama\n  proximoMS = \"\";\n  var MSs = nodos.filter((nodo) => {\n    return nodo.componente === \"microservicio\"\n  })\n  var nombres = MSs.map((nodo) => {\n    return nodo.id.replace(\"MS\", \"\");\n  })\n  nombres.sort();\n  var nums = nombres.map(function (str) {\n    return parseInt(str);\n  });\n  for (let i = 1; i < nums.length + 2; i++) {\n    if (i !== nums[i - 1]) {\n      proximoMS = \"MS\" + i;\n      return proximoMS;\n    }\n  }\n}\n\nfunction crearMicroservicio(ms, us) {\n  json = json.concat({\n    \"cohesion_lack\": 0,\n    \"cohesion_grade\": 0,\n    \"complexity\": 0,\n    \"id\": ms,\n    \"points\": 0,\n    \"semantic_similarity\": 0,\n    \"userStories\": us\n  });\n}\n\nfunction formatearUS(historia) {\n  var historiaFormateada = [\n    {\n      \"id\": historia.id,\n      \"name\": historia.name,\n      \"actor\": historia.actor,\n      \"points\": historia.points,\n      \"project\": historia.project,\n      \"priority\": historia.priority,\n      \"dependencies\": historia.dependencies\n    }\n  ]\n  return historiaFormateada;\n}\n\nfunction quitarUSdeMS(ms, us) {\n  for (let i = 0; i < Object(json).length; i++) {\n    if (json[i].id === ms) {\n      for (let j = 0; j < json[i].userStories.length; j++) {\n        if (json[i].userStories[j].id === us[0].id) {\n          json[i].userStories.splice(j, 1);\n          return;\n        }\n      }\n      return;\n    }\n  }\n}\n\nfunction init() {\n  const $ = go.GraphObject.make;\n  // set your license key here before creating the diagram: go.Diagram.licenseKey = \"...\";\n  myDiagram = $(go.Diagram, \"myDiagramDiv\", { // create a Diagram for the DIV HTML element       \n    \"animationManager.initialAnimationStyle\": go.AnimationManager.AnimateLocations,\n    //autoScale: go.Diagram.Uniform,  // scale always has all content fitting in the viewport\n\n    // decide what kinds of Parts can be added to a Group or to top-level\n    \"commandHandler.memberValidation\": (grp, node) => {\n      if (grp != null) { // maybe allow dropping groups in diagram's background\n        if (node instanceof go.Group) { // No deja agregar un grupo a otro grupo\n          return false;\n        }\n        return true;\n      }\n    },\n    \"undoManager.isEnabled\": true, // Habilita deshacer y rehacer\n    contentAlignment: go.Spot.Center,  // Centra el contenido en el viewport (ventana gr√°fica)\n    isReadOnly: false,  // No permite modificar\n    mouseDrop: (e, grp) => { // Devuelve al nodo a su posici√≥n original cuando se arrastra afuera\n      var nodoSeleccionado = myDiagram.selection; // Guarda el US seleccionado\n      var nuevaHistoria = formatearUS(nodoSeleccionado.ea.key.qb);\n      try {\n        var MSnombre = nodoSeleccionado.ea.key.qb.group; // Nombre del grupo\n        var MScompleto = e.diagram.findNodeForKey(MSnombre);\n        if (MScompleto.qb.userStories > 1) {\n          var proximo = nuevoMSid(); // Crea un nuevo id de MS no repetido\n          quitarUSdeMS(MSnombre, nuevaHistoria);\n          crearMicroservicio(proximo, nuevaHistoria); // Crea nuevo MS y le asigna el id reci√©n creado\n          nuevoDiagrama();\n        } else {\n          myDiagram.currentTool.doCancel();\n        }\n      } catch (error) {\n\n      }\n    },\n    mouseDragOver: function () {\n      myDiagram.currentCursor = \"grabbing\";\n      myDiagram.clearHighlighteds();\n    },\n    click: function () {\n      myDiagram.currentCursor = \"grabbing\";\n      myDiagram.clearHighlighteds();\n    }\n  });\n\n  myDiagram.groupTemplate = $(go.Group, \"Vertical\", { // 'Vertical' Pone el nombre del nodo arriba    \n    deletable: false, // No permite borrar el grupo\n    copyable: false,\n    //isActionable: true,\n    handlesDragDropForMembers: true,  // don't need to define handlers on Nodes and Links\n    computesBoundsAfterDrag: true  // Permite arrastrar la historia fuera del\n    // microservicio sin deformarlo\n  },\n    {\n      mouseOver: function (e) {\n        e.diagram.currentCursor = \"grab\";\n      },\n\n      // Para cambiar el fill (color) cuando el cursor entra o sale\n      mouseEnter: function (e, obj) {\n        var microservicio = obj.findObject(\"MICROSERVICIO\");\n        microservicio.fill = \"rgb(68, 100, 66)\";\n        obj.currentCursor = \"hand\";\n      },\n      mouseLeave: function (e, obj) {\n        var microservicio = obj.findObject(\"MICROSERVICIO\");\n        microservicio.fill = \"rgba(125, 200, 120, .6)\";\n      },\n      click: function (e, node) {\n        document.getElementById('titulo').innerHTML = 'MICROSERVICE METRICS';\n        var diagram = node.diagram;\n        // remove any previous highlighting\n        diagram.clearHighlighteds();\n        // highlight all Links and Nodes coming out of a given Node\n        diagram.startTransaction(\"highlight\");\n        //diagram.clearHighlighteds();\n        // for each Link coming out of the Node, set Link.isHighlighted\n        node.findLinksOutOf().each(function (l) { l.isHighlighted = true; });\n        // for each Node destination for the Node, set Node.isHighlighted\n        node.findNodesOutOf().each(function (n) { n.isHighlighted = true; });\n        diagram.commitTransaction(\"highlight\");\n      },\n\n      // what to do when a drag-over or a drag-drop occurs on a Group\n      mouseDragEnter: (e, grp, prev) => {\n        if (grp.canAddMembers(grp.diagram.toolManager.draggingTool.draggingParts)) {\n          const shape = grp.findObject(\"MICROSERVICIO\");\n          if (shape) {\n            shape.fill = \"chartreuse\";\n          }\n          grp.diagram.currentCursor = \"\";\n        } else {\n          grp.diagram.currentCursor = \"no-drop\";\n        }\n      },\n      mouseDragLeave: (e, grp, next) => {\n        const shape = grp.findObject(\"MICROSERVICIO\");\n        if (shape) {\n          shape.fill = \"rgba(125, 200, 120, .6)\";\n        }\n        grp.diagram.currentCursor = \"\";\n      },\n      mouseDrop: (e, grp) => {\n        const ok = grp.addMembers(grp.diagram.selection, true);\n        if (!ok) {\n          grp.diagram.currentTool.doCancel();\n          return;\n        }\n        convertir_nodosAjson(nodos);\n        nuevoDiagrama();\n      }\n    },\n    new go.Binding(\"layout\", \"columnas\", function (c) {\n      return $(go.GridLayout, {\n        wrappingColumn: c, // Determina cantidad de columnas\n        cellSize: new go.Size(0, 0), // Determina ancho de columnas\n        spacing: new go.Size(0, 0) // Determina espacio entre columnas\n      });\n    }),\n    // Inhabilitar el movimiento de los nodos resaltados:\n    //new go.Binding(\"isActionable\", \"isHighlighted\", function (h) {\n    //return h ? true : false;\n    //}).ofObject(),\n    $(go.Panel, \"Spot\",\n      //$(go.Shape, \"Hexagon\", {\n      $(go.Shape, \"Cube1\", {\n        name: \"MICROSERVICIO\",\n        fill: \"rgba(125, 200, 120, .6)\"\n      },\n        new go.Binding(\"stroke\", \"isHighlighted\", function (h) {\n          return h ? \"red\" : null;\n        }).ofObject(),\n        new go.Binding(\"stroke\", \"isSelected\", function (h) {\n          return h ? \"rgb(30,144,255)\" : null;\n        }).ofObject(),\n        new go.Binding(\"strokeWidth\", \"isHighlighted\", function (h) {\n          return h ? 2 : 3;\n        }).ofObject(),\n        new go.Binding(\"width\", \"size\"), // Asigna al ancho el valor de size\n        new go.Binding(\"height\", \"size\") // Asigna a la altura el valor de size\n      ), $(go.TextBlock, \"text\",\n        new go.Binding(\"text\", \"key\"), // Asigna al texto el valor de key\n        new go.Binding(\"alignment\", \"textoID\", function (c) {\n          return new go.Spot(0.5, c); // Asigna valor a Y en la posici√≥n del\n        }),\n      ),\n      $(go.Placeholder, { // Centra las HUs en el hex√°gono del microservicio\n        padding: 1\n      })\n    )\n  );\n\n  myDiagram.nodeTemplate = $(go.Node, \"Auto\", { // 'Auto' Ajusta el tama√±o del elemento seg√∫n sus subelementos. \n    locationSpot: go.Spot.Center,\n    copyable: false,\n    deletable: false // No permite borrar el nodo\n  },\n    {\n      mouseOver: function (e, node) {\n        e.diagram.currentCursor = \"grab\";\n      },\n\n      // Para cambiar el fill (color) cuando el cursor entra o sale\n      mouseEnter: function (e, obj) {\n        var microservicio = obj.findObject(\"HISTORIA\");\n        microservicio.fill = \"gray\";\n        obj.currentCursor = \"hand\";\n      },\n      mouseLeave: function (e, obj) {\n        var microservicio = obj.findObject(\"HISTORIA\");\n        microservicio.fill = \"white\";\n      },\n      click: function (e, node) {\n        document.getElementById('titulo').innerHTML = 'STORY METRICS';\n        var diagram = node.diagram;\n        // remove any previous highlighting\n        diagram.clearHighlighteds();\n      }\n    },\n    $(go.Shape, \"RoundedRectangle\", {\n      name: \"HISTORIA\",\n      fill: \"white\"\n    }),\n    $(go.TextBlock, \"text\",\n      new go.Binding(\"text\", \"key\") // Asigna al texto el valor de key\n    )\n  );\n\n  myDiagram.linkTemplate = $(go.Link, {\n    curve: go.Link.Bezier,\n    reshapable: true,\n    deletable: false // No permite borrar la flecha\n  },\n    // No necesita guardar Link.points, por lo que no necesita TwoWay Binding en \"puntos\"\n    new go.Binding(\"curviness\", \"curviness\").makeTwoWay(),  // pero guarda \"curvas\" autom√°ticamente\n    $(go.Shape, { // Caracter√≠sticas del cuerpo de la flecha       \n      strokeWidth: 2,\n    },\n      new go.Binding(\"stroke\", \"isHighlighted\", function (h) {\n        return h ? \"red\" : \"black\";\n      }).ofObject(),\n    ),\n    $(go.Shape, { // Caracter√≠sticas de la cabeza de la flecha  \n      toArrow: \"standard\", // Forma de la cabeza de la flecha  \n      stroke: \"white\" // Borde de la cabeza de flecha\n    })\n  );\n\n  // Crea el modelo del diagrama a mostrar\n  myDiagram.model = new go.GraphLinksModel(nodos, aristas);\n\n  // some shared model data\n  myDiagram.model.modelData = {\n    \"AIST\": AIST.toFixed(2),\n    \"ADST\": ADST.toFixed(2),\n    \"SIYT\": SIYT.toFixed(2),\n    \"CpT\": CpT.toFixed(2),\n    \"CohT\": CohT.toFixed(2),\n    \"SsT\": SsT.toFixed(2),\n    \"WsicT\": WsicT\n  };\n\n  // Show the primary selection's data, or blanks if no Part is selected:\n  // eslint-disable-next-line\n  var inspector = new Inspector('myInspectorDiv', myDiagram, {\n    //showAllProperties: true,\n    includesOwnProperties: false, // Para no mostrar todas las propiedades \n    inspectSelection: true,\n    properties: { // Declarar las propiedades que se quieren inspeccionar\n      \"id\": {\n        readOnly: true, // Para que no se pueda editar\n        show: Inspector.showIfPresent\n      },\n      \"points\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"dependencies\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"coupling_AIS\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"coupling_ADS\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"coupling_SIY\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"cohesion_lack\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"cohesion_grade\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"complexity\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"semantic_similarity\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"actor\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"group\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"name\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"priority\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      },\n      \"project\": {\n        readOnly: true,\n        show: Inspector.showIfPresent\n      }\n    }\n  });\n\n  // Siempre muestra el model.modelData:\n  var inspector2 = new Inspector('myInspectorDiv2', myDiagram, {\n    inspectSelection: false,\n    properties: {\n      \"AIST\": {\n        readOnly: true\n      },\n      \"ADST\": {\n        readOnly: true\n      },\n      \"SIYT\": {\n        readOnly: true\n      },\n      \"CpT\": {\n        readOnly: true\n      },\n      \"CohT\": {\n        readOnly: true\n      },\n      \"SsT\": {\n        readOnly: true\n      },\n      \"WsicT\": {\n        readOnly: true\n      }\n    }\n  });\n  inspector2.inspectObject(myDiagram.model.modelData);\n\n\n} // fin del Init()\n\nfunction validarJson(schema, jsonCargado) {\n  const Ajv = require(\"ajv\")\n  const ajv = new Ajv({ allErrors: true })\n  const validate = ajv.compile(schema)\n  const valid = validate(jsonCargado)\n  if (!valid) {\n    console.log(validate.errors);\n    swal({\n      title: \"Invalid schema\",\n      icon: \"error\",\n      timer: 2000\n    })\n    return false;\n  } else {\n    return true;\n  }\n}\n\nexport function leerArchivo(e) {\n  var archivo = e.target.files[0];\n  if (!archivo) {\n    return;\n  }\n  if (diagramaCargado) {\n    myDiagram.div = null;\n    myDiagram = null;\n  }\n  json = [];\n  var lector = new FileReader();\n  lector.onload = function (e) {\n    var jsonData = e.target.result;\n    json = JSON.parse(jsonData);\n    var schema = require('./schemas/microservices.json');\n    var esValido = validarJson(schema, json);\n    if (esValido) {\n      convertir_jsonAnodos();\n    }\n  };\n  lector.readAsText(archivo);\n  document.getElementById(\"miInput\").value = null;\n}\n\nfunction formatearDependencias() { // Quita los nombres de las dependencias y las\n  var dependencias = [];           // deja como un arreglo de strings (historias)\n  for (let i = 0; i < userStory.length; i++) {\n    dependencias = [];\n    for (let j = 0; j < userStory[i].dependencies.length; j++) {\n      dependencias = dependencias.concat(userStory[i].dependencies[j].id);\n    }\n    userStory[i].dependencies = dependencias;\n  }\n}\n\nfunction verificarHistoria() {   // Verifica la existencia de una historia de usuario \n  // en un diagrama de microservicios\n  for (let h = 0; h < userStory.length; h++) {\n    for (let i = 0; i < json.length; i++) {\n      for (let j = 0; j < json[i].userStories.length; j++) {\n        if (json[i].userStories[j].id === userStory[h].id) {\n          swal({\n            title: \"The story \" + userStory[h].id + \" is already in the project\",\n            text: \"Operation cancelled\",\n            icon: \"warning\"\n          })\n          return true;\n        }\n      }\n    }\n  }\n  formatearDependencias();\n  swal({\n    title: \"Stories included succesfully\",\n    icon: \"success\",\n    timer: 1500\n  })\n  return false;\n}\n\nfunction quitarGuionesMedios(us) {\n  for (let i = 0; i < us.length; i++) {\n    us[i].id = us[i].id.replace(\"-\", \"\");\n    for (let j = 0; j < us[i].dependencies.length; j++) {\n      us[i].dependencies[j].id = us[i].dependencies[j].id.replace(\"-\", \"\");\n    }\n  }\n  return us;\n}\n\nfunction agregarHistoria(e) {\n  if (diagramaCargado) {\n    var archivo = e.target.files[0];\n    if (!archivo) {\n      return;\n    }\n    var lector = new FileReader();\n    lector.onload = function (e) {\n      var userStoryData = e.target.result;\n      var file = JSON.parse(userStoryData)\n      userStory = file.userStories;\n      var schema = require('./schemas/userStories.json');\n      var esValido = validarJson(schema, userStory);\n      if (esValido) {\n        userStory = quitarGuionesMedios(userStory);\n        var existeHistoria = verificarHistoria();\n        if (!existeHistoria) {\n          var micro_servicio = nuevoMSid();\n          crearMicroservicio(micro_servicio, userStory);\n          nuevoDiagrama();\n        }\n      }\n    };\n    lector.readAsText(archivo);\n  } else {\n    swal({\n      title: \"Cargue un diagrama primero\",\n      icon: \"error\",\n      timer: 2000\n    })\n  }\n  document.getElementById(\"miInput2\").value = null;\n}\n\nfunction exportarJson() {\n  if (diagramaCargado) {\n    var dataStr = JSON.stringify(json);\n    var dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n\n    var exportFileDefaultName = 'data.json'; // Asigna un nombre al archivo\n\n    var linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  } else {\n    swal({\n      title: \"Cargue un diagrama primero\",\n      icon: \"error\",\n      timer: 2000\n    })\n  }\n}\n\nfunction nuevoDiagrama() {\n  if (diagramaCargado === true) {\n    myDiagram.div = null;\n    myDiagram = null;\n  }\n  convertir_jsonAnodos();\n  diagramaCargado = true;\n}\n\n// render function...\nexport function App() {\n  return (\n    <div>\n      <span id='spanEncabezado'>\n        <div id=\"encabezado\"></div>\n      </span>\n      <span className='spanInspector'>\n        <div className=\"fondoInspector\">\n          <div id='inputsDiv'>\n            <div className=\"file-select\" id=\"src-file1\" >\n              <input onInput={leerArchivo} className='boton' type=\"file\" id='miInput' />\n            </div>\n            <div className=\"file-select\" id=\"src-file2\" >\n              <input onInput={agregarHistoria} className='boton' type=\"file\" id='miInput2' />\n            </div>\n            <div className=\"file-select\" id=\"src-file3\" >\n              <button onClick={exportarJson} className='boton' type=\"button\" id='miInput3' />\n            </div>\n          </div>\n          <h3 id='titulo' className=\"informacion\">METRICS</h3>\n          <div id=\"myInspectorDiv\" className=\"inspector\"></div>\n        </div>\n      </span>\n      <span id='spanDiagram'>\n        <div id='myDiagramDiv'></div>\n      </span>\n      <span className='spanInspector'>\n        <div className=\"fondoInspector\">\n          <h3 className=\"informacion\">APP METRICS:</h3>\n          <div id=\"myInspectorDiv2\" className=\"inspector\"></div>\n          <div>\n            <h3 className=\"informacion\">MICROSERVICE SIZE:</h3>\n            <label className=\"container\">STORIES\n              <input id=\"stories\" onClick={nuevoDiagrama} type=\"radio\" defaultChecked=\"checked\" name=\"radio\" />\n              <span className=\"checkmark\"></span>\n            </label>\n            <label className=\"container\">POINTS\n              <input id=\"points\" onClick={nuevoDiagrama} type=\"radio\" name=\"radio\" />\n              <span className=\"checkmark\"></span>\n            </label>\n          </div>\n        </div>\n      </span>\n    </div>\n  );\n}\n/*        C√≥digo pregunta en SweetAlert\nswal({\n  title: \"T√≠tulo de la pregunta\",\n  text: \"Acepta esta pregunta?\",\n  icon: \"warning\",\n  buttons: ['Cancelar', 'Aceptar']\n}).then(respuesta => {\n  if (respuesta) {\n    swal({\n      title: \"Acept√≥ la pregunta\",\n      icon: \"success\",\n      timer: 1500\n    })\n  }\n})\n*/\n//function mostrarContenido(contenido) {\n//  var elemento = document.getElementById('contenido-archivo');\n//  elemento.innerHTML = contenido; // Inyecta un contenido a un elemento HTML en la p√°gina\n//}\n\n//<script>\n//addEventListener = {document.addEventListener('change', LeerArchivo, false)}\n//</script>\n\n//export default App\n\n// Si se habilita esta l√≠nea, se ejecuta la funci√≥n Init cuando el HTML carga el script\n//window.addEventListener('DOMContentLoaded', Init);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}